F._setMod("mancard");F._fileMap({"/js/mancard_57355160.js":["config","skeleton/card","skeleton/model","skeleton/card_collection","skeleton/presenter","setting/card_setting","subscribe/parabola","subscribe/subscribe"],"/css/card_min_7cac0378.css":["card_setting.css","card_menu.css"]});F._useConfig=true;F._firstScreenJS=F._firstScreenJS||[];F._firstScreenJS.push("/js/mancard_57355160.js");F.module("mancard:skeleton/card",function(c,b,a){var d=(function(){var e=/<link[^>]*href="(.*?)"[^>]*>/;var i=$("#s_menus_wrapper");var l=$("#s_ctner_menus");var f="";function k(o,m,n){this.id=(""+o)||"";this.loaded=0;this.html="";this.name=m||"";this.state=n||"";this.mainDom=$("#s_content_"+this.id);this.mainDom=this.mainDom[0]?this.mainDom:j({id:this.id});this.waterDom=null;this.noMore=false;this.myMen=null;this.rendered=false;this.waterPage=0;this.waterLoading=false;this.prevRidsArr=window.s_session.rids||[];this.repeatNum=0;this.ridsHash={}}k.prototype={constructor:k,load:function(m){var n=this;if(n.id!=""){if(n.loaded===0){n.loaded=1;g(n.id,function(r){n.loaded=2;n.sessionId=r.sessionId;n.prevRidsArr=r.rids;for(var q=0,p=r.rids||[],o=p.length;q<o;q++){n.ridsHash[p[q]]=true}n.html=r.html.replace(e,"");if(r.isEnd==1){n.noMore=true}n.loadCss(r.html,m)})}}},loadCss:function(p,m){var o,n;if(p){o=p.match(e);if(o){n=o[1];$('<link rel="stylesheet" type="text/css" href="'+n+'" />').on("load",function(){m&&m(p)}).appendTo(head);if($.browser.safari&&window.navigator.platform==="Win32"){m&&m(p)}}else{m&&m(p)}}},appendData:function(o,n){var q=this;if(q.noMore||q.waterLoading||!q.rendered){if(q.noMore){n&&n(false)}return false}if(!q.loadDom){q.loadDom=q.mainDom.find(".s-loading")}q.waterLoading=true;n&&n(false);var r={id:q.id,offset:q.waterPage,sessionId:q.sessionId};var p=null;if((p=(q.mainDom||$("#s_content_"+q.id)).attr("data-waterpara"))){var s=/([s\S]+?)\=([\s\S]+?)\;/g;var m=null;while((m=s.exec(p))){r[m[1]]=m[2];if(m[1]==="offset"){q.waterPage=m[2]}}}q.loadDom.show();F.use("mancard:skeleton/model",function(t){t.get("waterHtml",function(w){if(!q.waterDom){q.waterDom=$(".water-container",q.mainDom)}var v=q.validateRid(w);var u=[function(){f=(f===""||f==1)?"1":undefined;q.waterDom.append(w.html);q.waterLoading=false;q.loadDom.hide();if(w.isEnd=="1"){q.emitNoMore(q.loadDom);q.noMore=true}q.waterPage++;q.mainDom.attr("data-loaded",1);a.fire("cardloaded",{cardId:q.id,loadData:w});o&&o.call(q,w)},function(){q.waterLoading=false;q.appendData(o,n)},function(){q.emitNoMore(q.loadDom);q.noMore=true}];u[v]()},r)});return true},validateRid:function(r){var n=this;var q=r.rids||[];var p=0;for(var o=0,m=q.length;o<m;o++){if(!!q[o]&&!!n.ridsHash[q[o]]){p=1}n.ridsHash[q[o]]=true}if(p===1){n.repeatNum++}else{if(n.repeatNum===1){n.repeatNum=0}}n.prevRidsArr=q;return n.repeatNum},render:function(m){var n=this;$("#s_ctner_contents").append(this.mainDom);n.load(function(o){var p=$(n.html);n.mainDom.html(p);if(n.noMore){n.emitNoMore(n.mainDom.find(".s-loading"))}n.rendered=true;m&&m();a.fire("cardinitloaded")});return n},add2Men:function(m){var n=this;if(!n.myMen){var o=h({id:this.id,name:this.name});n.myMen=$(o)}i.append(n.myMen);n.myMen.show();n.render();return n},del4Men:function(m){var n=this;if((n.myMen=$("[data-id="+this.id+"]",i))[0]){n.myMen.hide();n.mainDom.hide();n.state=""}return n},show:function(m){var n=this;if(this.rendered){if(f==1&&this.waterPage==0){this.appendData(function(o){})}this.mainDom.stop().show()}else{this.render(function(){m&&m.call(this)});this.mainDom.stop().show()}m&&m.call(this);this.getMyMen().addClass("current");return this},hide:function(m){this.mainDom.stop().hide();this.getMyMen().removeClass("current");m&&m.call(this);return this},getMyMen:function(){return this.myMen||(this.myMen=$("[data-id="+this.id+"]",l))},emitNoMore:function(m){m=m||this.mainDom.find(".s-loading");m.find(".load-text").addClass("no-more").html("没有更多内容了").end().find("img").hide().end().prepend('<div class="load-done"></div>').show();if(this.id==100||this.id=="1"||this.id=="22"){m.hide()}}};function h(n){var m='<span class="s-menu-item s-opacity-white-background" data-id="#{id}">#{name}</span>';return $.formatString(m,n)}function j(n){var m='<div id="s_content_#{id}" class="s-content" style="display:none;"><div class="s-content-load s-opacity-white-background"><img src="#{staticUrl}static/superman/img/loading.gif?v=47332489.gif" /><div>加载中，精彩马上呈现</div></div></div>';$.extend(n,{staticUrl:s_domain.staticUrl});return $($.formatString(m,n))}function g(n,m){F.use("mancard:skeleton/model",function(o){o.get("cardHtml",function(p){m&&m(p)},{id:n,isPull:(f||"")})})}return k})();return d});F.module("mancard:skeleton/model",function(d,a,c){var f="/home/pcweb/";function g(){}var e={waterHtml:function(h,k){var i=k.id||0,j=k.page||1;$.ajaxget(f+"data/mancardwater?"+$.param(k),function(l){h&&h(l)})},cardHtml:function(h,j){var i=$.param(j);$.ajaxget(f+"data/mancardhtml?"+i,function(k){h&&h(k)})}};var b={curmenu:function(i,h,j){var k=i||0;$.ajaxpost(f+"submit/mancardmenu",{id:i},function(l){h&&h(l)})}};g.prototype={get:function(i,h,j){return(e[i]&&e[i](h,j))||false},set:function(i,j,h,k){return(b[i]&&b[i](j,h,k))||false}};return new g()});F.module("mancard:skeleton/card_collection",function(d,b,a){var e=d("mancard:skeleton/card");var h=$("#s_menu_gurd");var g=$("#s_top_wrap");var c=$("#s_mancard_main .s-menu-container");function f(){this.pool={};this.curId=s_session.curmod;this._options={};this.menuTopShowed=false}f.prototype={constructor:f,add:function(k,i,j){if(k instanceof e){return(this.pool[k.id]=k)}else{if(typeof parseInt(k)=="number"&&i!=null&&j!=null){return(this.pool[""+k]=new e(k,i,j))}}return k},remove:function(i){if(i instanceof e){this.pool[i.id]=null}else{if(typeof parseInt(i)=="number"){this.pool[""+i]=null}}return i},get:function(i){return this.pool[""+i]},createCard:function(k,i,j){if(this.pool[k]){return this.pool[""+k]}return new e(k,i,j)},switchCard:function(l,j){var k=this;if($("#s_top_wrap").hasClass("s-down")){if(k.pool[""+l].waterPage==0){if($.isIE<9){k.fixIE(0,function(){})}else{window.scrollTo($(window).scrollLeft(),0)}}else{var i=Math.max($("#s_ctner_contents").offset().top-110,0);k.fixIE(i,function(){})}}k.cardDone(l,j)},cardDone:function(k,i){var j=this;j.pool[j.curId].hide(function(){j.pool[""+k].show(function(){window.s_session.curmod=j.curId=""+k;F.use("mancard:skeleton/model",function(l){l.set("curmenu",j.curId)});i&&i()})})},getMenuIDS:function(){var i=$("#s_menus_wrapper").find(".s-menu-item"),j=[];$.each(i,function(k,l){j.push($(l).attr("data-id"))});return j},toggleMenu:function(i,k){var j=this;var l=g.children(".s-top-nav");if(!!i){h.addClass("s-down");if($("#s_upfunc_menus .s-lite").hasClass("hide-icon")){l.append(h)}if(!j.menuTopShowed){l.css("display","block");h.css({marginTop:-1*h.height()}).stop().animate({marginTop:"0"},150)}j.menuTopShowed=true}else{if(k){h.removeClass("s-down");c.append(h)}else{h.css({marginTop:"0"}).stop().animate({marginTop:-1*h.height()},150,function(){l.css("display","none")})}j.menuTopShowed=false}a.fire("showTopMenu",{show:i})},options:function(){switch(arguments.length){case 0:return this._options;case 1:return this._options[arguments[0]];case 2:return(this._options[arguments[0]]=arguments[1])}},fixIE:function(k,i){var j=this;$("html,body").animate({scrollTop:k},500,function(){i&&i.call(j)})}};return new f()});F.module("mancard:skeleton/presenter",function(d,x,m){var b=d("skeleton/card_collection");var u=$("#s_mancard_main");var w=$("#s_ctner_menus");var e=$("#s_ctner_contents");var g=$(".s-menu-container",u);var j={};var h=$.parseJSON($.trim($("#s_menus_textarea",u).html()));var f=$(window).height();var v={};var a=true;function r(){n();q();k();i()}function n(){var C=h.data;var B=C.length;while(B--){var D=C[B];if(D.state==="1"){b.add(D.id,D.name,D.state)}}var z=b.get(s_session.curmod);z.rendered=true;z.noMore=!!parseInt(h.isEnd);z.sessionId=window.s_session.sessionId;for(var B=0,A=window.s_session.rids||[],y=A.length;B<y;B++){z.ridsHash[A[B]]=true}if(z.noMore){z.emitNoMore()}t.toggleMore(!parseInt(h.isEnd));setTimeout(function(){m.fire("modShow",{showTab:b.curId,opType:"refresh"});o()},1000)}function q(){}function i(){}var c={latestY:$(window).scrollTop(),barTop:g.offset().top,barHeight:w.height(),topWrap:$("#s_top_wrap"),centTop:e.offset().top+parseInt(e.css("padding-top")),showed:false,overCenter:false,menuGurd:$("#s_menu_gurd",u),container:$(".s-menu-container",u),toolBar:$(".top-feed",u),toolBarTop:Math.min(parseInt($(".top-feed",u).css("top")),300),menuStatus:b.options("menuStatus",0),toggleMenu:function(B){if($.isIE===6){return}var y=this;if(B===y.latestY){return}var A=$.isIE==7?10:3;if((B<y.latestY)&&(y.barTop-B<=y.topWrap.height()+A)){if(!y.showed){b.toggleMenu(true);y.showed=true;b.options("menuStatus",1)}}else{var z=(y.barTop-B>y.topWrap.height()+A);if(y.showed){b.toggleMenu(false,z);y.showed=false}if(y.barTop-B>y.topWrap.height()){b.options("menuStatus",0)}else{b.options("menuStatus",2)}}if((y.centTop-B)<y.topWrap.height()){if(!y.overCenter){m.fire("overCenter",{over:true});y.overCenter=true}}else{if(y.overCenter){m.fire("overCenter",{over:false});y.overCenter=false}}y.latestY=B;if(b.options("menuStatus")==1){$(".mine-tips").hide()}else{if(s_session.userTips&&(s_session.userTips.mineNavTips&&s_session.userTips.mineNavTips!="off")){$(".mine-tips").show()}}},judgeMenu:function(z){var y=this;if(z>0){y.toolBar.find(".to-top").css({visibility:"visible"})}else{y.toolBar.find(".to-top").css({visibility:"hidden"})}},initAdjust:function(){var y=$("#head_wrapper");$(window).on("unload",function(){$(".s-news-rank-wrapper",u).hide();y.removeClass("s-down");window.scrollTo(0,0)})},feedRoller:function(z){if($.isIE!==6){return}var y=this;_top=Math.min((y.toolBarTop+z),e.height()-y.toolBar.height());y.toolBar.css({top:_top})}};var t={defaulSub:300,tolerance:a?0:300,preTop:0,moreBar:u.find(".s-more-bar"),judgeFire:function(){var y=this;if(window.s_session.userTips.manhGuide){return}if(y.tolerance===0){return}b.get(b.curId).appendData(function(z){},t.toggleMore)},toggleMore:function(y){if(!y){t.moreBar.remove()}else{t.moreBar.show()}},moreUpFy:function(B,y){var A=new Image();var z=this;t.moreBar.css({visibility:"visible"});if(y){if(z.moreUp){var D=e.offset().top+e.height()-$(window).height()-$(window).scrollTop();t.moreBar.css({bottom:Math.min(Math.max(0,D),10)})}}if($(window).height()<830){if(z.moreUp!==true){t.moreBar.addClass("s-more-up").appendTo(e);z.moreUp=true;var D=e.offset().top+e.height()-$(window).height()-$(window).scrollTop();t.moreBar.css({bottom:Math.min(Math.max(0,D),10)});function C(E){t.moreBar.find(".animate-arrow").animate({top:E?18:8},800,"swing",function(){C(!E)})}C(true)}}else{if(z.moreUp!==false){t.moreBar.removeClass("s-more-up");e.after(t.moreBar);if(!z.morePngLoaded){t.moreBar.find(".rect")[0].onload=function(){t.moreBar.css({visibility:"visible"})};z.morePngLoaded=true}z.moreUp=false}if(B===true){t.moreBar.find(".rect").attr("src",s_domain.staticUrl+"static/mancard/img/more_white_7e7e7f63.png")}else{if(B===false){t.moreBar.find(".rect").attr("src",s_domain.staticUrl+"static/mancard/img/more_black_da813ffa.png")}}}},moreDownFy:function(){if($(window).height()>700){var y=u.find(".s-more-bar").addClass("s-more-up").find(".rect").attr("src",s_domain.staticUrl+(window.s_session.userIsNewSkined=="on"?"static/mancard/img/more_white_7e7e7f63.png":"static/mancard/img/more_black_da813ffa.png")).end();e.after(y)}}};function s(){b.toggleMenu(true);c.showed=true;b.options("menuStatus",1)}function l(){var y={product_id:1};bds.qa.ShortCut.initRightBar(y);$("#fb_baidu_wizard").css({height:"100%"})}function k(){var A=null;w.delegate(".s-menu-item","click",function(D){var C=$(this);var E=C.attr("data-id");var B=b.curId;if(b.curId!==E){b.switchCard(E,function(){t.toggleMore(!parseInt(b.get(b.curId).waterPage)&&!b.get(b.curId).noMore)});t.toggleMore(!parseInt(b.get(b.curId).waterPage)&&!b.get(b.curId).noMore);m.fire("switchCard",{toCard:E,fromCard:B})}if(E=="100"){u.find(".mine-tips").hide();F.use("superman:common/user_attr",function(G){if(G.getAttr&&G.getAttr("mineNavTips")){G.setAttr("mineNavTips","off")}})}F.use("mancard:setting/card_setting",function(G){G.hide()});setTimeout(function(){m.fire("modShow",{showTab:b.curId,opType:"click"});m.fire("modClick",{clickTab:b.curId});o()},500);F.use("superman:common/user_attr",function(G){if(G.getAttr&&G.getAttr("firstMahattan")){var H=b.getMenuIDS().join(",");$.ajaxpost(s_domain.baseuri+"/pcweb/submit/mancardmod",{cmd:"sort",ids:H});G.setAttr("firstMahattan","off")}});D.stopPropagation()}).delegate(".s-menu-item","mouseenter",function(C){var B=$(this);var E=B.attr("data-id");var D=+new Date();j[E]={start:D};j[E].timeId=setTimeout(function(){if(!b.get(E).rendered){b.get(E).render()}},150);C.stopPropagation()}).delegate(".s-menu-item","mouseleave",function(D){var C=$(this);var G=C.attr("data-id");var E=j[G];var B=+new Date();if(E&&E.start){if(B-E.start<150){clearTimeout(E.timeId)}}D.stopPropagation()}).delegate(".s-menu-setting","click",function(B){F.use("mancard:setting/card_setting",function(C){if(!C.isShow()){C.show({current:$("#s_menus_wrapper").find(".current").attr("data-id")})}else{C.hide()}})});u.delegate(".s-more-bar","click",function(B){t.tolerance=t.defaulSub;t.judgeFire();m.fire("loadMoreClick");B.stopPropagation()}).delegate(".to-top","click",function(B){$("body,html").animate({scrollTop:0});m.fire("gotoTopClick");B.stopPropagation()}).delegate(".feed-back","click",function(B){if(bds&&bds.qa&&bds.qa.ShortCut&&bds.qa.ShortCut.initRightBar){l()}else{$.getScript($.url.escapeSSL("http://f3.baidu.com/feedback/js/feedback/feedback0.0.2-nj.js")+"?t="+(+new Date())).done(l)}m.fire("categoryClick",{category:"feedback"});B.stopPropagation()}).delegate(".top-feed div[data-tool=1]","mouseenter mouseleave",function(B){if(B.type==="mouseenter"){$(this).addClass("icon-over")}else{if(B.type==="mouseleave"){$(this).removeClass("icon-over")}}B.stopPropagation()}).delegate(".tips-text","click",function(B){b.switchCard("100");u.find(".mine-tips").hide();F.use("superman:common/user_attr",function(C){if(C.getAttr&&C.getAttr("mineNavTips")){C.setAttr("mineNavTips","off")}});B.preventDefault();B.stopPropagation()}).delegate(".tips-close","click",function(B){u.find(".mine-tips").hide();F.use("superman:common/user_attr",function(C){if(C.getAttr&&C.getAttr("mineNavTips")){C.setAttr("mineNavTips","off")}});B.preventDefault();B.stopPropagation()});m.listen("mancard:setting/card_setting",["hideMain","showSet","hideSet"],function(D){if(D.cmd==="add"){(b.get(D.id)||b.add(D.id,D.name,"1")).add2Men();A=D.id}else{if(D.cmd==="del"){var E=0;b.get(D.id).del4Men();for(E in b.pool){break}A=E}else{if(D.cmd==="sort"){var C=$("#s_menus_wrapper");$.each(D.ids,function(H,I){b.get(I).getMyMen().appendTo(C)})}else{if(D._EVENT_NAME==="hideMain"){var B=$("#s_top_wrap").hasClass("s-down")?(($.isIE===8||$.isIE===7)?2500:400):0;$("html,body").animate({scrollTop:0},B,function(){$("#head_wrapper").addClass("s-ps-islite");$("#s_main").hide();$("#s_mancard_newmusic").hide();$("#s_mancard_newmusic").remove();$("#s_upfunc_menus .s-lite").removeClass("hide-icon");F.use("superman:common/user_attr",function(H){H.setAttr("isLite",true)})})}else{if(D._EVENT_NAME==="showSet"){A=null}else{if(D._EVENT_NAME==="hideSet"){A=null;var C=$("#s_menus_wrapper");var G=b.getMenuIDS();$.each(G,function(H,I){if($.inArray(I,D.ids)==-1){b.get(I).del4Men();b.get(I).getMyMen().removeClass("current")}});$.each(D.items,function(H,J){if(b.get(J.id)){var I=b.get(J.id).getMyMen();I.css("display","");I.appendTo(C);if(I.hasClass("current")){A=J.id}}else{b.add(J.id,J.name,"1").add2Men()}});if(D.items.length==0){A="100"}if(s_session.curmod=="100"){return}if(A!=s_session.curmod){if(A!=null){b.switchCard(A)}else{b.switchCard(D.ids[0])}}}}}}}}});m.listen("superman:page/scroll","outMenu",function(B){if(!B.out){$("#s_top_wrap .s-top-nav").css("display","none")}});t.moreUpFy();$(window).bind("resize",function(B){f=$(this).height();c.barTop=g.offset().top;t.moreUpFy(undefined,true)}).on("scroll",function(D){if(s_session.index_off||s_session.index_guide){return}var C=$(this).scrollTop();var B=$(document).height();if(Math.abs(C+f-B)<=t.tolerance&&t.preTop<C){t.judgeFire()}t.preTop=C;c.judgeMenu(C);c.toggleMenu(C);c.feedRoller(C);setTimeout(function(){o()},300);t.moreUpFy(undefined,true)});$(window).on("s-skinon",function(){t.moreUpFy(true)});$(window).on("s-skinoff",function(){t.moreUpFy(false)});$(document.body).on("mousewheel",z).on("keydown",z);function z(B){if(s_session.index_guide){return}if((document.documentElement.scrollHeight<=document.documentElement.clientHeight&&B.deltaY<0)||($(window).scrollTop()+$(window).height()-$(document).height()>=-2&&t.tolerance===0&&(B.deltaY<0||B.keyCode===40))){t.tolerance=t.defaulSub;t.judgeFire()}}var y=false;m.listen("mancard:skeleton/card","cardloaded",function(){if(!y){$("#bottom_container").appendTo("#s_wrap");y=true}})}function p(){o();setTimeout(function(){m.fire("modShow",{showTab:b.curId,opType:"refresh"})},1000)}function o(){var A=$("#s_content_"+b.curId),E=A.find("[data-rid]"),I=null,y=v[b.curId]||[];var H=[],J=[],D=[];for(var C=0;C<E.length;C++){I=E.eq(C);var G=I.attr("data-rid");var z;if(I.attr("data-log")){z=/stype\:(\d)+;/g.exec(I.attr("data-log"));z=z&&z[1]}if($.inArray(G,y)!=-1){continue}if((I.offset().top+I.height()/2)-$(window).scrollTop()<f){if($.inArray(G,y)==-1){H.push(G);if(z){D.push(z)}J.push(C);y.push(G)}}}v[b.curId]=y;if(H.length!=0){var B={rids:H.join(","),pos:J.join(",")};if(D.length){B.stype=D.join(",")}m.fire("cardItemShow",B)}}x.init=r;x.forceMenu=s;x.judgeFire=function(){t.tolerance=300;t.judgeFire()}});F.call("mancard:skeleton/presenter","init");F.module("mancard:setting/card_setting",function(n,A,t){var q=n("superui:util/emitter"),x=n("superui:util/dot"),c=n("superman:common/user_attr"),j=x.compile(['<div class="s-cardsetting" id="s_content_99" data-id="99">','<div class="s-cardsetting-wrap clearfix">','<div class="s-cardsetting-left">',"<h3>已订阅频道</h3>",'<div style="float:left;width:78px;text-align:center;margin-top:18px;border:1px solid #cdcdcd;height:24px;line-height:24px;">我的关注</div>','<div class="s-cardsetting-content">',"{{~it.selected :value:index}}",'<div class="s-mod-item {{ if(value.id == "100"){ }}s_mod_myitem{{ } }}" {{ if(value.id == "100"){ }}canceldrag="2"{{ } }} id="s_moditem_{{=value.id}}" data-id="{{=value.id}}" data-imgname="{{=value.imgname}}" data-name="{{=value.name}}">','<div class="s-mod-icon">',"</div>",'<div class="s-mod-title" {{ if(value.id == "100"){ }}canceldrag="2"{{ } }}>',"{{=value.name}}","</div>","</div>","{{~}}",'<div class="noremove-tips">','<p>亲，就剩我老哥一个了，不能再删了~可以尝试点击右下角“<a class="tips-hide" href="javascript:void(0)">隐藏频道</a>”收起全部内容。</p>','<b class="close-icon" title="关闭"></b>',"</div>",'<div class="drag-tips">','<p>拖动可以排序<a class="i" href="javascript:void(0)">我知道了</a></p>',"<b></b>","</div>","</div>","</div>",'<div class="s-cardsetting-right">',"<h3>未订阅频道</h3>",'<div class="s-cardsetting-content">',"{{~it.unselected :value:index}}",'<div class="s-mod-item" id="s_moditem_{{=value.id}}" data-id="{{=value.id}}" data-imgname="{{=value.imgname}}" data-name="{{=value.name}}">','<div class="s-mod-icon">',"</div>",'<div class="s-mod-title">',"{{=value.name}}","</div>","</div>","{{~}}","</div>","</div>","</div>",'<div class="s-cardsetting-set-wrapper">','<div class="s-cardsetting-set clearfix">',"{{? it.expand}}","{{~it.expand :value:index}}","{{? value.tipsunknown}}",'<span class="scene-recomm-unknown"></span>',"{{?}}",'<a href="#" onclick="return false;"  class="hide-mods {{=value.otherClassName}}"  hidefocus><span class="{{=value.borderClass}} {{=value.reviewCheck}}" id="{{=value.myId}}" data-attr="{{=value.tips}}"></span><span>{{=value.description}}</span></a>',"{{~}}",'<a href="#" onclick="return false;" class="hide-mods" id="s_hide_allmods" hidefocus=""><span class="bg"></span><span>隐藏频道</span></a>',"{{?}}","</div>","</div>","</div>"].join("")),l='<div class="s-mod-tips">',v="",o="拖动到这里可以取消订阅",y="mod-hover",k="hide-mods",a="."+k,z="s-mod-item",m="."+z,u=".s-cardsetting-left .s-cardsetting-content",r=".s-cardsetting-right .s-cardsetting-content",s=n("superui:component/draggselect"),e=n("superman:common/user_attr"),g=n("superui:component/dialog"),w=n("superui:component"),d=true,p=false,f=n("skeleton/card_collection"),b={mod:s_domain.baseuri+"/pcweb/submit/mancardmod",menu:s_domain.baseuri+"/pcweb/submit/mancardmenu"};var h=null;function i(){this.initialize()}i.prototype={constructor:i,initialize:function(){this.main=$("#s_main");this.textarea=$("#s_menus_textarea");this.addedcache=[];if(this.textarea.length){this.selected=[];this.unselected=[];this.cache=$.parseJSON(this.textarea.val());this.render()}this.__datas=[]},renderTips:function(){var B,C=this;C.dialog.body.on("click",".scene-recomm-unknown",function(){if(!B){F.use("superui:component/tips",function(E){var D=$(".scene-recomm-unknown",C.dialog.body);B=new E({componentWrap:C.dialog.body,target:D,identity:"scene-recommend",content:['<div class="scene-recommend-content">','<div class="scene-recommend-content">',"<h2>情景推荐模式：</h2>",'<p class="title">即当您登录百度首页时，页面会优先切换到您此时可能感兴趣的内容。</p>',"<p>例：您习惯看各种资讯，一大早打开电脑，会优先给您推荐新闻；闲暇时会给您切换至视频卡片供您舒缓神经。</p>",'<p class="last s-opacity-border4-top">如若您不喜欢，取消勾选框中的√即可，感谢您的使用~</p>',"</div>"].join(""),align:"center",arrowLeft:"right",autoShow:false,hasClose:false,width:388,theme:"scene-recommend"})})}B.show()})},render:function(){var B=this,C=[];var D=null;F.each(B.cache.data,function(E){if(E.id=="100"){D=E}if(E.ismenu=="1"){if(E.state=="1"){B.selected.push(E)}else{B.unselected.push(E)}}});if(s_session.strategy_hit==2){C.push({otherClassName:"content-mod",borderClass:"choice-border",tips:"mouseScrollGuide",myId:"mouseScroll_mod",description:"滚轮切换卡片",reviewCheck:s_session.userTips.mouseScrollGuide?"checked":""})}C.push({otherClassName:"content-mod",borderClass:"choice-border",tips:"conRecommendTip",myId:"conRecommend_mod",description:"情景推荐",tipsunknown:true,reviewCheck:s_session.userTips.conRecommendTip?"checked":""});B.expand=C},init:function(){var B=this;dialog=B.dialog;dialog.body.on("mouseenter mouseleave",m,function(C){var D=$(C.target).closest(m);D[C.type=="mouseenter"?"addClass":"removeClass"](y)});B.bindDrag();dialog.on("onHide",function(E){$("#s_main").removeClass("sui-cardsetting-main");s_session.skeleton_stopanimated=false;var C=B.getItems(),D={};t.fire("hideSet",C);B.dialog.log("hide")});B.bindEvent()},bindEvent:function(){var B=this,C=B.dialog.body.find(".drag-tips"),E=B.dialog.body.find(".tips-hide"),D=B.dialog.body.find(".close-icon");C.on("click",function(){F.use("common/user_attr",function(G){G.setAttr("settingDragTips",false);C.css("display","none")})});E.on("click",function(G){B.hideMain();G.stopPropagation()});$(document).on("mousedown",function(G){if($(G.target).hasClass("menu-icon")){return}B.hide();p=false});D.on("click",function(G){B.dialog.body.find(u).find(".noremove-tips").css("display","none")});t.listen("mancard:skeleton/presenter","overCenter",function(G){if(!!G.over){B.hide()}});t.listen("mancard:skeleton/card_collection","showTopMenu",function(G){if(!G.show){B.hide()}});$(window).on("scroll",function(){})},save:function(){var C=this,B=C.packed;setTimeout(function(){t.fire("modOperate",B)},100)},pack:function(E){var B=this,C,D=E.dragItem;B.packed={ismenu:1,cmd:E.type=="added"?"add":E.type=="remove"?"del":"sort"};C=B.getIDS();B.packed.ids=C.ids;B.packed.names=C.names;if(D){B.packed.id=D.attr("data-id");B.packed.name=D.attr("data-name")}B.save()},getIDS:function(){var E={ids:[],names:[]},B=this.draggselect.selected,D=B.drags,C=B.cache;F.each(C,function(J){var I=D.eq(J),G=I.attr("data-id"),H=I.attr("data-name");E.ids.push(G);E.names.push(H)});return E},getItems:function(){var D=[],G=[],B=this.draggselect.selected,E=B.drags,C=B.cache;F.each(C,function(K){var J=E.eq(K),H=J.attr("data-id"),I=J.attr("data-name");G.push(H);D.push({name:I,id:H})});return{ids:G,items:D}},tips:function(){var B=this,E,D,C=B.draggselect;E=C.selected;D=C.unselected;if(!E.tipsmessage){E.tipsmessage=$(l).html(o).appendTo(E.wrap)}if(!D.tipsmessage){D.tipsmessage=$(l).html(v).appendTo(D.wrap)}if(E.total==0){D.tipsmessage.show();E.tipsmessage.hide()}else{D.tipsmessage.hide();if(D.total==0){D.tipsmessage.hide();E.tipsmessage.show()}else{E.tipsmessage.hide()}}D.tipsmessage.hide()},cacheAdded:function(E){var C=this,D,G,B=this.addedcache;if(E.dragItem){G=E.dragItem.attr("data-id");D=$.inArray(G,B);if(D>-1){B.splice(D,1)}if(E.type=="added"){B.push(G)}}},bindDrag:function(){var B=this,C=B.dialog,D;if(C.body.find(u).width()>530){B.bugtotal=B.bugtotal||0;if(B.bugtotal++<100){return setTimeout(function(){B.bindDrag()},200)}}B.draggselect=new s({identity:"cardsetting",containment:C.body,selected:C.body.find(u),unselected:C.body.find(r),dragsort:m,cansort:false});B.draggselect.on("onBeforeSelect",function(G){h=G.dragItem;h.css("zoom","0");var E=G.dragItem.parent().parent();B.dialog.body.find(".drag-tips").css("display","none");if(G.dragItem){G.dragItem.removeClass(y)}});B.draggselect.on("onAfterSelect",function(E){if(h){setTimeout(function(){h.css("zoom","1")},50)}});B.draggselect.on("onBeforeSelectSwap",function(){B.dialog.body.find(".drag-tips").css("display","none");B.draggselect.selected.parentoffset=$(".s-cardsetting-left .s-cardsetting-content").offset();B.draggselect.unselected.parentoffset=$(".s-cardsetting-right .s-cardsetting-content").offset()});B.draggselect.on("onSelectSwap",function(K){K.dragItem&&K.dragItem.removeClass("mod-hover");if(K.dragItem&&$.isIE){K.dragItem.removeClass("mod-hover");setTimeout(function(){},100)}B.checkLeave();switch(K.type){case"added":cmd="add";break;case"remove":cmd="del";var J=K.dragItem,E,L;B.cacheAdded(K);if(J&&J.length){if(K.type=="remove"){B.tips(true)}else{B.tips()}J.removeClass(y)}break;case"noremove":B.dialog.body.find(".drag-tips").hide();break;case"switch":cmd="sort";break}B.pack(K);if(s_session.userTips.firstMahattan){F.use("superman:common/user_attr",function(N){N.setAttr("firstMahattan",false)})}$.ajaxpost(b.mod,{cmd:B.packed.cmd,id:K.dragItem?K.dragItem.attr("data-id"):undefined,ids:B.packed.ids.join(",")},function(N){});var H=f.getMenuIDS();var M=B.getItems().ids;for(var G=0;G<H.length;G++){var I=f.get(H[G]).getMyMen();if(I.hasClass("current")&&$.inArray(H[G],M)==-1){$.ajaxpost(b.menu,{id:M[0]},function(N){})}}});B.draggselect.on("onAfterSelect",function(E){p=true;B.checkLeave()});B.draggselect.on("onResizeHeight",function(E){});B.draggselect.on("beforeMoving",function(){C.body.find(u).find(".noremove-tips").css("display","none")});B.bindExpand();B.renderTips();B.tips(true);B.checkLeave()},checkLeave:function(){var B=this;leftHave=B.dialog.body.find(u).find(m).length;d=leftHave==1?false:true},bindExpand:function(){var B=this,C=B.dialog;C.body.on("click",function(H){var I=$(H.target).closest(a),E,D,G;if(I.length){E=I.find("span").eq(0);if(D=E.attr("data-attr")){G=E.toggleClass("checked").hasClass("checked");e.setAttr(D,G);B.draggselect.log(D,"checked="+G)}else{B.draggselect.log("hidemain");B.hideMain()}return false}})},hideMain:function(B){if(!B){this.dialog.hide()}t.fire("hideMain")},show:function(D){var B=this,C;B.current=D.current;if(B.cache){if(!B.dialog){$("#s_main").addClass("sui-cardsetting-main");B.dialog=new g({identity:"cardsetting",width:C=B.main.width(),content:j({expand:B.expand,unselected:B.unselected,selected:B.selected}),position:function(){return{top:"36px",width:"895px",left:"0px"}},theme:"cardsetting",autoShow:false,hasMask:false,hasClose:false,componentWrap:$("#s_main"),hackToTop:false});B.dialog.on("onShow",function(){$("#s_main").addClass("sui-cardsetting-main");s_session.skeleton_stopanimated=true;if(!B.binded){setTimeout(function(){B.init(B.binded=true)},100)}})}if(!s_session.userTips.settingDragTips||B.selected.length==0){B.dialog.body.find(".drag-tips").css("display","none")}B.dialog.show();B.beforeShow();if($.isIE6){$(".sui-dialog-cardsetting .sui-dialog-body").show()}else{if(true){$(".sui-dialog-cardsetting .sui-dialog-body").css({display:"block"});$(".sui-dialog-cardsetting").animate({height:"186px"},200)}else{}}t.fire("showSet")}B.dialog.hasshow=true;$(".sui-dialog-body").on("click",function(E){E.stopPropagation()});B.dialog.body.on("mousedown",function(E){E.stopPropagation()});F.use("common/user_attr",function(E){E.setAttr("settingDragTips",false)});F.use("newmusic:player",function(E){if(!!E.isOpen()){$("#s_mancard_newmusic").find(".js-player-open").trigger("click")}})},hide:function(){var B=this;if(B.isShow()){if($.isIE6){$(".sui-dialog-cardsetting .sui-dialog-body").hide();B.dialog.hide()}else{$(".sui-dialog-cardsetting").animate({height:"0px"},200,function(){$(".sui-dialog-cardsetting .sui-dialog-body").css({display:"none"});B.dialog.hide()})}}},isShow:function(){if($(".sui-dialog-cardsetting .sui-dialog-body").length==0||$(".sui-dialog-cardsetting .sui-dialog-body").css("display")=="none"){return false}else{return true}},beforeShow:function(){var B=this,D=$("#s_top_wrap"),C=$(".sui-dialog-cardsetting");if(D.find("#s_menu_gurd").length>0){if($.isIE6){C.css("position","absolute");C.css("top",$(window).scrollTop()-$("#s_main").offset().top+110+"px")}else{C.css("position","fixed");C.css("top","110px");C.css("left",$("#s_main").offset().left)}}else{C.css("position","absolute");C.css("top","36px")}}};return new (F.inherit(i,q))()});F.module("mancard:subscribe/parabola",function(j,x,m){(function(){var b=0;var c=["webkit","moz"];for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(D,A){var z=new Date().getTime();var B=Math.max(0,16.7-(z-b));var C=window.setTimeout(function(){D(z+B)},B);b=z+B;return C}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(z){clearTimeout(z)}}}());var k={speed:166.67,curvature:0.001,progress:function(){},complete:function(){i&&i()}};var d,w,i;var s={},h=h||{};for(var y in k){s[y]=h[y]||k[y]}x={mark:function(){return this},position:function(){return this},move:function(){return this},init:function(){return this}};var e="margin",u=document.createElement("div");if("oninput" in u){["","ms","webkit"].forEach(function(b){var a=b+(b?"T":"t")+"ransform";if(a in u.style){e=a}})}var v=s.curvature,t=0,r=0;var n=true;var q={},l={};var g={},p={};var f={},o={};x.mark=function(){if(n==false){return this}if(typeof f.x=="undefined"){this.position()}d.setAttribute("data-center",[f.x,f.y].join());w.setAttribute("data-center",[o.x,o.y].join());return this};x.position=function(){if(n==false){return this}var b=document.documentElement.scrollLeft||document.body.scrollLeft,a=document.documentElement.scrollTop||document.body.scrollTop;if(e=="margin"){d.style.marginLeft=d.style.marginTop="0px"}else{d.style[e]="translate(0, 0)"}q=d.getBoundingClientRect();l=w.getBoundingClientRect();g={x:q.left+(q.right-q.left)/2+b,y:q.top+(q.bottom-q.top)/2+a};p={x:l.left+(l.right-l.left)/2+b,y:l.top+(l.bottom-l.top)/2+a};f={x:0,y:0};o={x:-1*(g.x-p.x),y:-1*(g.y-p.y)};t=(o.y-v*o.x*o.x)/o.x;return this};x.move=function(){if(n==false){return this}var a=0,b=o.x>0?1:-1;var c=function(){var A=2*v*a+t;a=a+b*Math.sqrt(s.speed/(A*A+1));if((b==1&&a>o.x)||(b==-1&&a<o.x)){a=o.x}var z=a,B=v*z*z+t*z;d.setAttribute("data-center",[Math.round(z),Math.round(B)].join());if(e=="margin"){d.style.marginLeft=z+"px";d.style.marginTop=B+"px"}else{d.style[e]="translate("+[z+"px",B+"px"].join()+")"}if(a!==o.x){s.progress(z,B);window.requestAnimationFrame(c)}else{s.complete();n=true}};window.requestAnimationFrame(c);n=false;return this};x.init=function(c,b,a){d=c;w=b;i=a;this.position().mark().move()};return x});F.module("mancard:subscribe/subscribe",function(i,w,n){var d=i("mancard:skeleton/card_collection");var u=["s_ctner_contents"],r=false,j,q=$('<div class="sub-anistar"><b></b></div>'),o=$('<div class="sub-anipic">							<div class="sub-ie-mask"></div>						</div>'),p=[],c=$('<div class="sub-aniadd"></div>'),k=$('<div class="sub-anistaradd"></div>'),a=$("#head"),m=s_domain.baseuri+"/subscribe/submit/manoperation ",h="data-subscribe",v="data-rid",f=0;var e=i("superui:component/tips");var b=function(x){$("#"+x).on("mouseenter mouseleave","["+h+"]",function(z){var y=z.target;if(z.type==="mouseenter"){window.debugenter=function(){var A;if((A=$(this).find(".subscribe"))[0]){A.show();if($(this).attr(h)=="1"){g("1",A)}else{g("0",A)}return}var B=$('<div class="subscribe" data-click="LOG_BTN_SUB"><div class="sub"><em class="sub-bg"></em><b class="sub-star"></b><span class="sub-txt" style="display:none">已关注</span></div></div>');if($(this).attr(h)=="1"){g("1",B)}else{g("0",B)}if($(this).find(".sub-contaniner").length>0){$(this).find(".sub-contaniner").append(B)}else{$(this).append(B)}if($.isIE6){B.css("zoom","1")}};window.debugenter.call(this)}else{if(z.target!=$(this).find(".subscribe").find(".sub-star")[0]){$(this).find(".subscribe").css("zoom","0").detach()}}}).on("click",".subscribe",function(y){t($(this),$(this));y.stopPropagation()})};var g=function(x,z){var y=z.children();if(x=="1"){y.removeClass("unsub");y.addClass("sub");z.attr("data-click","LOG_BTN_UNSUB");z.find(".sub-txt").text("已关注");if(s_session.curmod=="20"){z.attr("title","已关注,点击取消")}}else{if(x=="0"){y.removeClass("sub");y.addClass("unsub");z.attr("data-click","LOG_BTN_SUB");z.find(".sub-txt").text("关注");if(s_session.curmod=="20"){z.attr("title","添加到关注")}}}};var t=function(z,D){var A=z,C=A.parents("["+h+"]"),x=C.attr(h),B=C.attr(v),y;if(x=="1"){y="del";l(C,{id:B,cmd:y},function(){C.attr(h,"0");g("0",D)})}else{y="add";s(C,{id:B,cmd:y},function(){C.attr(h,"1");g("1",D)})}C.parents(".s-xmancard").attr("data-subChange",1)};function s(C,D,x){var E=C.offset();var B=$("#s_menu_mine .mine-icon").offset();var y=o.clone();y.attr("class","sub-anipic sub-anipic-"+s_session.curmod);var A=C.closest("["+v+"]").find("img").attr("src");var z={tabid:window.s_session.curmod,url:C.find("a").attr("href")||"",name:C.find("a").attr("title")||"",from:window.s_session.curmod};$.extend(z,D);$.ajaxpost(m,z,function(H){var G=H.errNo;if(G=="0"||G=="6004"){x&&x();n.fire("refresh",{tabid:z.tabid,param:z});if($.isIE6){return}if($.isIE&&$.browser.ie<9&&s_session.userSkinOpacity>20){y.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=scale, src='"+A+"')"})}else{y.css({"background-image":"url("+A+")"});y.css({filter:"none"})}setTimeout(function(){B=$("#s_menu_mine .mine-icon").offset();var I=-parseInt($("#s_menu_gurd").css("margin-top"),10);y.animate({left:B.left-10+"px",top:B.top-7+I+"px"},1000,function(){y.fadeOut(function(){y.remove()});var J=k.clone();J.css({left:B.left,top:B.top});a.append(J);J.show();J.animate({top:B.top-40,opacity:"0"},2000,function(K){J.remove()})})},0);y.css({left:E.left+45,top:E.top});a.append(y);if(d.options("menuStatus")=="2"||d.options("menuStatus")=="1"){F.call("mancard:skeleton/presenter","forceMenu")}}else{if(G=="501"){n.fire("showExceedTips",{tabid:z.tabid})}else{}}})}function l(z,A,x){var y={tabid:window.s_session.curmod,url:z.find("a").attr("href")||"",name:z.find("a").attr("title")||"",from:window.s_session.curmod};$.extend(y,A);$.ajaxpost(m,y,function(C){var B=C.errNo;if(B=="0"){x&&x();setTimeout(function(){n.fire("refresh",{tabid:y.tabid,param:y})},1000)}else{}})}w.init=function(){$.each(u,function(x,y){b(y)})};w.subAdd=s;w.subDel=l});F.call("mancard:subscribe/subscribe","init");